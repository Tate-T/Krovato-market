<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css"
      integrity="sha512-oHDEc8Xed4hiW6CxD7qjbnI+B07vDdX7hEPTvn9pSZO1bcRqHp8mj9pyr+8RVC2GmtEfI2Bi9Ke9Ass0as+zpg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <title>Кошик</title>
    <link rel="stylesheet" href="./sass/tray.scss" />
    <script type="module" src="./js/index.js"></script>
  </head>
  <body>
    <load ="./partials/repeat-section/header.html" />
    <load ="./partials/tray-page/tray.html" />
    <load ="./partials/repeat-section/advantages.html" />
    <load ="./partials/repeat-section/footer.html" />
    <script>
      let minusNumber1 = document.querySelector(".tray__right-pay-price");
      let couponButton = document.querySelector(".tray__right-promo-btn");
      let alreadyExecuted = false;
      let couponActivated = false;
      let couponeInput = document.querySelector(".tray__right-promo-input");

      const allowedCoupons = ["Ruslan", "Artem", "Vika", "GoITeens", "Vyacheslav"];

      couponButton.addEventListener("click", function () {
        let promocode = couponeInput.value.trim();

        if (allowedCoupons.includes(promocode) && !alreadyExecuted) {
          anime({
            targets: minusNumber1,
            innerHTML: [540269, 481263],
            easing: "linear",
            duration: 1300,
            round: 1,
            loop: false,
            update: function () {
              minusNumber1.innerHTML =
                numberWithSpaces(minusNumber1.innerHTML) + " грн";
            },
          });

          function numberWithSpaces(x) {
            return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
          }

          alreadyExecuted = true;
        }
      });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const deliveryItems = document.querySelectorAll(".tray__delivery-item");

        deliveryItems.forEach(function (item) {
          item.addEventListener("click", function () {
            deliveryItems.forEach(function (item) {
              item.classList.remove("active");
            });
            item.classList.add("active");
          });
        });
      });

      document.addEventListener("DOMContentLoaded", function () {
        var checkbox = document.getElementById("trayRightCheckbox");
        var button = document.querySelector(".tray__right-pay-btn");

        checkbox.addEventListener("change", function () {
          if (checkbox.checked) {
            button.classList.add("orange");
          } else {
            button.classList.remove("orange");
          }
        });
      });
    </script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="./js/header.js"></script>
    <script>
      AOS.init();
    </script>
  </body>
</html>
